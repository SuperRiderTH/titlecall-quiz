<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ブルアカタイトルコールクイズ</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; margin: 50px; }
        input, button { margin: 10px; padding: 10px; font-size: 16px; }
        #result-container { display: flex; flex-direction: column; align-items: center; justify-content: center; margin-top: 10px; }
        #resultImage { width: 200px; margin-top: 10px; display: none; } /* 初期状態は非表示 */
        #score { display: none; font-size: 20px; font-weight: bold; margin-top: 20px; }
        #screenshotButton { display: none; margin-top: 20px; padding: 10px; font-size: 16px; margin: 20px auto; } /* 初期状態は非表示で最後に表示 */
        #passButton { margin-top: 10px; padding: 10px; font-size: 16px; } /* パスボタンのスタイル */
    </style>
</head>
<body>
    <h1>ブルアカタイトルコールクイズ</h1>
    <button onclick="playSound()">タイトルコールを聞く</button>
    <br>
    <input type="text" id="answer" placeholder="答えを入力">
    <button onclick="checkAnswer()">回答</button>
    <button id="passButton" onclick="passQuestion()">パス</button>
    
    <div id="result-container">
        <p id="result"></p>
        <img id="resultImage" src="" alt="結果の画像">
    </div>
    <p id="score"></p>
    <button id="screenshotButton" onclick="takeScreenshot()">スクリーンショットを撮る</button>

    <audio id="quizSound"></audio>

    <script>
        let allQuestions = [
            { sound: "q1.wav", answer: "アイリ", image: "r1.png" },
            { sound: "q2.wav", answer: "アカネ", image: "r2.png" },
            { sound: "q3.wav", answer: "アカリ", image: "r3.png" },
            { sound: "q4.wav", answer: "アコ", image: "r4.png" },
            { sound: "q5.wav", answer: "アズサ", image: "r5.png" },
            { sound: "q6.wav", answer: "アスナ", image: "r6.png" },
            { sound: "q7.wav", answer: "アツコ", image: "r7.png" },
            { sound: "q8.wav", answer: "アヤネ", image: "r8.png" },
            { sound: "q9.wav", answer: "アリス", image: "r9.png" },
            { sound: "q10.wav", answer: "アル", image: "r10.png" },
            { sound: "q11.wav", answer: "イオリ", image: "r11.png" },
            { sound: "q12.wav", answer: "イズナ", image: "r12.png" },
            { sound: "q13.wav", answer: "イズミ", image: "r13.png" },
            { sound: "q14.wav", answer: "イチカ", image: "r14.png" },
            { sound: "q15.wav", answer: "イブキ", image: "r15.png" },
            { sound: "q16.wav", answer: "イロハ", image: "r16.png" },
            { sound: "q17.wav", answer: "ウイ", image: "r17.png" },
            { sound: "q18.wav", answer: "ウタハ", image: "r18.png" },
            { sound: "q19.wav", answer: "エイミ", image: "r19.png" },
            { sound: "q20.wav", answer: "カエデ", image: "r20.png" },
            { sound: "q21.wav", answer: "カズサ", image: "r21.png" },
            { sound: "q22.wav", answer: "カスミ", image: "r22.png" },
            { sound: "q23.wav", answer: "カホ", image: "r23.png" },
            { sound: "q24.wav", answer: "カヨコ", image: "r24.png" },
            { sound: "q25.wav", answer: "カリン", image: "r25.png" },
            { sound: "q26.wav", answer: "カンナ", image: "r26.png" },
            { sound: "q27.wav", answer: "キキョウ", image: "r27.png" },
            { sound: "q28.wav", answer: "キサキ", image: "r28.png" },
            { sound: "q29.wav", answer: "キララ", image: "r29.png" },
            { sound: "q30.wav", answer: "キリノ", image: "r30.png" },
            { sound: "q31.wav", answer: "ココナ", image: "r31.png" },
            { sound: "q32.wav", answer: "コタマ", image: "r32.png" },
            { sound: "q33.wav", answer: "コトリ", image: "r33.png" },
            { sound: "q34.wav", answer: "コハル", image: "r34.png" },
            { sound: "q35.wav", answer: "コユキ", image: "r35.png" },
            { sound: "q36.wav", answer: "サオリ", image: "r36.png" },
            { sound: "q37.wav", answer: "サキ", image: "r37.png" },
            { sound: "q38.wav", answer: "サクラコ", image: "r38.png" },
            { sound: "q39.wav", answer: "サヤ", image: "r39.png" },
            { sound: "q40.wav", answer: "シグレ", image: "r40.png" },
            { sound: "q41.wav", answer: "シズコ", image: "r41.png" },
            { sound: "q42.wav", answer: "シミコ", image: "r42.png" },
            { sound: "q43.wav", answer: "ジュリ", image: "r43.png" },
            { sound: "q44.wav", answer: "シュン", image: "r44.png" },
            { sound: "q45.wav", answer: "ジュンコ", image: "r45.png" },
            { sound: "q46.wav", answer: "シロコ", image: "r46.png" },
            { sound: "q47.wav", answer: "スズミ", image: "r47.png" },
            { sound: "q48.wav", answer: "スミレ", image: "r48.png" },
            { sound: "q49.wav", answer: "セイア", image: "r49.png" },
            { sound: "q50.wav", answer: "セナ", image: "r50.png" },
            { sound: "q51.wav", answer: "セリカ", image: "r51.png" },
            { sound: "q52.wav", answer: "セリナ", image: "r52.png" },
            { sound: "q53.wav", answer: "チェリノ", image: "r53.png" },
            { sound: "q54.wav", answer: "チセ", image: "r54.png" },
            { sound: "q55.wav", answer: "チナツ", image: "r55.png" },
            { sound: "q56.wav", answer: "チヒロ", image: "r56.png" },
            { sound: "q57.wav", answer: "ツクヨ", image: "r57.png" },
            { sound: "q58.wav", answer: "ツバキ", image: "r58.png" },
            { sound: "q59.wav", answer: "ツルギ", image: "r59.png" },
            { sound: "q60.wav", answer: "トキ", image: "r60.png" },
            { sound: "q61.wav", answer: "トモエ", image: "r61.png" },
            { sound: "q62.wav", answer: "ナギサ", image: "r62.png" },
            { sound: "q63.wav", answer: "ナツ", image: "r63.png" },
            { sound: "q64.wav", answer: "ネル", image: "r64.png" },
            { sound: "q65.wav", answer: "ノア", image: "r65.png" },
            { sound: "q66.wav", answer: "ノドカ", image: "r66.png" },
            { sound: "q67.wav", answer: "ノノミ", image: "r67.png" },
            { sound: "q68.wav", answer: "ハスミ", image: "r68.png" },
            { sound: "q69.wav", answer: "ハナエ", image: "r69.png" },
            { sound: "q70.wav", answer: "ハナコ", image: "r70.png" },
            { sound: "q71.wav", answer: "ハルカ", image: "r71.png" },
            { sound: "q72.wav", answer: "ハルナ", image: "r72.png" },
            { sound: "q73.wav", answer: "ハレ", image: "r73.png" },
            { sound: "q74.wav", answer: "ヒナ", image: "r74.png" },
            { sound: "q75.wav", answer: "ヒナタ", image: "r75.png" },
            { sound: "q76.wav", answer: "ヒビキ", image: "r76.png" },
            { sound: "q77.wav", answer: "ヒフミ", image: "r77.png" },
            { sound: "q78.wav", answer: "ヒマリ", image: "r78.png" },
            { sound: "q79.wav", answer: "ヒヨリ", image: "r79.png" },
            { sound: "q80.wav", answer: "フィーナ", image: "r80.png" },
            { sound: "q81.wav", answer: "フウカ", image: "r81.png" },
            { sound: "q82.wav", answer: "フブキ", image: "r82.png" },
            { sound: "q83.wav", answer: "ホシノ", image: "r83.png" },
            { sound: "q84.wav", answer: "マキ", image: "r84.png" },
            { sound: "q85.wav", answer: "マコト", image: "r85.png" },
            { sound: "q86.wav", answer: "マシロ", image: "r86.png" },
            { sound: "q87.wav", answer: "マリー", image: "r87.png" },
            { sound: "q88.wav", answer: "マリナ", image: "r88.png" },
            { sound: "q89.wav", answer: "ミカ", image: "r89.png" },
            { sound: "q90.wav", answer: "ミサキ", image: "r90.png" },
            { sound: "q91.wav", answer: "ミチル", image: "r91.png" },
            { sound: "q92.wav", answer: "ミドリ", image: "r92.png" },
            { sound: "q93.wav", answer: "ミナ", image: "r93.png" },
            { sound: "q94.wav", answer: "ミネ", image: "r94.png" },
            { sound: "q95.wav", answer: "ミノリ", image: "r95.png" },
            { sound: "q96.wav", answer: "ミモリ", image: "r96.png" },
            { sound: "q97.wav", answer: "ミヤコ", image: "r97.png" },
            { sound: "q98.wav", answer: "ミユ", image: "r98.png" },
            { sound: "q99.wav", answer: "ムツキ", image: "r99.png" },
            { sound: "q100.wav", answer: "メグ", image: "r100.png" },
            { sound: "q101.wav", answer: "モエ", image: "r101.png" },
            { sound: "q102.wav", answer: "モミジ", image: "r102.png" },
            { sound: "q103.wav", answer: "モモイ", image: "r103.png" },
            { sound: "q104.wav", answer: "ユウカ", image: "r104.png" },
            { sound: "q105.wav", answer: "ユカリ", image: "r105.png" },
            { sound: "q106.wav", answer: "ユズ", image: "r106.png" },
            { sound: "q107.wav", answer: "ヨシミ", image: "r107.png" },
            { sound: "q108.wav", answer: "リオ", image: "r108.png" },
            { sound: "q109.wav", answer: "レンゲ", image: "r109.png" },
            { sound: "q110.wav", answer: "ワカモ", image: "r110.png" },
            { sound: "q111.wav", answer: "ウミカ", image: "r111.png" },
            { sound: "q112.wav", answer: "サツキ", image: "r112.png" },
            { sound: "q113.wav", answer: "チアキ", image: "r113.png" },
            { sound: "q114.wav", answer: "メル", image: "r114.png" },
            { sound: "q115.wav", answer: "ルミ", image: "r115.png" },
            { sound: "q116.wav", answer: "レイサ", image: "r116.png" },
            { sound: "q117.wav", answer: "レイジョ", image: "r117.png" }
        ];
        
        let questions = allQuestions.slice().sort(() => Math.random() - 0.5).slice(0, 10);
        let currentQuestion = 0;
        let score = 0;
        
        function playSound() {
            document.getElementById("quizSound").src = questions[currentQuestion].sound;
            document.getElementById("quizSound").play();
        }
        
        function checkAnswer() {
            let userAnswer = document.getElementById("answer").value.trim();
            let resultElement = document.getElementById("result");
            let resultImage = document.getElementById("resultImage");
            
            if (userAnswer === questions[currentQuestion].answer) {
                resultElement.innerText = "正解！";
                score++;
            } else {
                resultElement.innerText = "不正解！";
            }
            
            resultImage.src = questions[currentQuestion].image;
            resultImage.style.display = "block"; 
            
            moveToNextQuestion();
        }
        
        function passQuestion() {
            let resultElement = document.getElementById("result");
            let resultImage = document.getElementById("resultImage");
            
            resultElement.innerText = "不正解！（パス）";
            resultImage.src = questions[currentQuestion].image;
            resultImage.style.display = "block";
            
            moveToNextQuestion();
        }
        
        function moveToNextQuestion() {
            currentQuestion++;
            if (currentQuestion < questions.length) {
                setTimeout(() => {
                    document.getElementById("result").innerText = "";
                    document.getElementById("resultImage").style.display = "none";
                    document.getElementById("answer").value = "";
                }, 1000);
            } else {
                setTimeout(() => {
                    document.getElementById("score").innerText = `先生のスコア: ${score} / ${questions.length}`;
                    document.getElementById("score").style.display = "block";
                    document.getElementById("screenshotButton").style.display = "block";
                }, 1000);
            }
        }
        
        function takeScreenshot() {
            html2canvas(document.body, { useCORS: true }).then(canvas => {
                let link = document.createElement("a");
                link.href = canvas.toDataURL("image/png");
                link.download = "quiz_result.png";
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }).catch(error => {
                console.error("スクリーンショットの取得に失敗しました", error);
                alert("スクリーンショットの保存に失敗しました。ページを再読み込みして試してください。");
            });
        }
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" crossorigin="anonymous"></script>
</body>
</html>
